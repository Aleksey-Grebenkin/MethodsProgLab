# Лаба по технологиям программирования

## Виртуальная память

### Почему C#
- Не нужно париться над приведением типов
- Всю грязную работу может делать BinaryReader/BinaryWriter
- Нам надо написать тесты, для C# есть куча гайдов и библиотек.

### Структура виртуальной памяти
Сначала открываем файл (если его нет, то создать и в начало написать `BM`), проверить на буквы `BM`, если все корректно - посчитать длину.
В начале бинарного файла идет `BM`, потом идут блоки и перед ними битовая карта.
Порядок битовой карты:
 1. Флаг модификации
 2. Флаг блокировки
 3. Счетчик записей (предлагаю убрать, хотя хз, у него в [методичке](https://mega.nz/file/nhdEmL5A#SRncPadrBUpkafeaak3ziRKT79EbP7yVIaz_FtR8lUE) в начале это написано, в структуре этого нет)
 4. Время записи
 5. Страница (512 байт / 8 = количество элементов на странице)

### План работы
#### Предлагаю реализовать следующим образом: 
В `MemoryList` реализовать два конструктора: один для создания пустой страницы с битовой маской и второй для загрузки из потока. В каждый конструктор требовать номер страницы.
В `Memory` в конструкторе реализовать открытие/создание файла виртуальной памяти (если открытие, то посчитать количество страниц). В `Memory.GetAddress()` реализовать вычисление адреса элемента массива с заданным индексом (адрес можно сделать как место в файле, либо загружать в память и возвращать указатель, но это слишком сложно). И в `Memory[index]` получение и запись с учетом буфера (я сделал размер буфера 5, но можно любой).

Потом создать отдельные проекты в рамках одного решения (C# это позволяет), где будут тесты и интерфейс для работы с программой (консоль/GUI)
